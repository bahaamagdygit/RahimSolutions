<div class="product-details-page">
  <!-- Breadcrumbs -->
  <nav class="breadcrumbs">
    @for (crumb of breadcrumbs; track crumb.label; let last = $last) {
      @if (crumb.link && !last) {
        <a [routerLink]="crumb.link" class="breadcrumb-link">{{ crumb.label }}</a>
        <svg class="breadcrumb-separator" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
          <polyline points="9 18 15 12 9 6"></polyline>
        </svg>
      } @else {
        <span class="breadcrumb-current">{{ crumb.label }}</span>
      }
    }
  </nav>

  <!-- Main Content -->
  <div class="details-content">
    <!-- Left Column -->
    <div class="left-column">
      <!-- Image Gallery -->
      <div class="gallery-section">
        <app-img-details [config]="galleryConfig"></app-img-details>
      </div>

      <!-- Price & Info -->
      <div class="price-section">
        <h1 class="product-price">{{ product.price }}</h1>
        <div class="product-meta">
          <span class="product-details-text">{{ product.details }}</span>
          <span class="listed-date">{{ product.listedDate }}</span>
        </div>
      </div>

      <!-- Description -->
      <div class="info-card">
        <h2 class="section-title">Description</h2>
        <ul class="description-list">
          @for (item of product.description; track item) {
            <li>{{ item }}</li>
          }
        </ul>
      </div>

      <!-- Specifications -->
      <div class="info-card">
        <h2 class="section-title">Specifications</h2>
        <ul class="specifications-list">
          @for (spec of product.specifications; track spec.label) {
            <li class="spec-item">
              <span class="spec-label">{{ spec.label }}</span>
              <span class="spec-value">{{ spec.value }}</span>
            </li>
          }
        </ul>
      </div>
    </div>

    <!-- Right Column (Sidebar) -->
    <aside class="right-column">
      <!-- Seller Card -->
      <div class="seller-card">
        <h3 class="seller-card-title">Listed By Agency</h3>

        <div class="seller-info">
          <div class="seller-details">
            <div class="seller-name-row">
              <span class="seller-name">{{ seller.name }}</span>
              @if (seller.isVerified) {
                <svg class="verified-badge" width="16" height="16" viewBox="0 0 24 24" fill="#3b82f6">
                  <path d="M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"/>
                </svg>
              }
            </div>
            <span class="seller-member-since">{{ seller.memberSince }}</span>
          </div>
          <div class="seller-logo">
            <img [src]="seller.logo" [alt]="seller.name" onerror="this.src='/assts/imge/images.png'">
            <span class="seller-brand">{{ seller.name }}</span>
          </div>
        </div>

        <a routerLink="/seller/profile" class="view-profile-link">View Profile</a>

        <!-- Contact Buttons -->
        <button class="contact-btn phone-btn" (click)="togglePhone()">
          <svg width="20" height="20" viewBox="0 0 24 24" fill="currentColor">
            <path d="M6.62 10.79c1.44 2.83 3.76 5.14 6.59 6.59l2.2-2.2c.27-.27.67-.36 1.02-.24 1.12.37 2.33.57 3.57.57.55 0 1 .45 1 1V20c0 .55-.45 1-1 1-9.39 0-17-7.61-17-17 0-.55.45-1 1-1h3.5c.55 0 1 .45 1 1 0 1.25.2 2.45.57 3.57.11.35.03.74-.25 1.02l-2.2 2.2z"/>
          </svg>
          <span>Show Phone Number</span>
        </button>
        @if (showPhone()) {
          <div class="phone-number">{{ phoneNumber }}</div>
        }

        <button class="contact-btn chat-btn" (click)="chatWithSeller()">
          <svg width="20" height="20" viewBox="0 0 24 24" fill="currentColor">
            <path d="M20 2H4c-1.1 0-2 .9-2 2v18l4-4h14c1.1 0 2-.9 2-2V4c0-1.1-.9-2-2-2z"/>
          </svg>
          <div class="chat-text">
            <span>Chat with the seller</span>
            <small>{{ seller.responseTime }}</small>
          </div>
        </button>
      </div>

      <!-- Reviews Card -->
      <div class="reviews-card">
        <h3 class="card-title">Reviews</h3>
        <div class="rating-row clickable" (click)="openReviewsPopup()">
          <span class="rating-number">{{ seller.rating }}</span>
          <div class="stars">
            @for (star of getStars(seller.rating); track $index) {
              <svg width="18" height="18" viewBox="0 0 24 24" [attr.fill]="star ? '#fbbf24' : '#e5e7eb'">
                <path d="M12 2l3.09 6.26L22 9.27l-5 4.87 1.18 6.88L12 17.77l-6.18 3.25L7 14.14 2 9.27l6.91-1.01L12 2z"/>
              </svg>
            }
          </div>
          <span class="review-count">{{ seller.reviewCount }} Reviews</span>
        </div>

        <button class="see-reviews-btn" (click)="openReviewsPopup()">
          <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
            <path d="M1 12s4-8 11-8 11 8 11 8-4 8-11 8-11-8-11-8z"/>
            <circle cx="12" cy="12" r="3"/>
          </svg>
          <span>See all reviews</span>
        </button>

        <button class="follow-btn" (click)="followSeller()">
          <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
            <path d="M16 21v-2a4 4 0 0 0-4-4H5a4 4 0 0 0-4 4v2"/>
            <circle cx="8.5" cy="7" r="4"/>
            <line x1="20" y1="8" x2="20" y2="14"/>
            <line x1="23" y1="11" x2="17" y2="11"/>
          </svg>
          <span>Follow the seller</span>
        </button>
      </div>

      <!-- See Other Ads -->
      <div class="other-ads-card">
        <h3 class="card-title">See Other Ads For This Seller</h3>
        <div class="seller-ads-list">
          @for (ad of sellerAds; track ad.id) {
            <app-min-genaric-card
              [badgeText]="ad.badge"
              [badgeGradient]="'linear-gradient(135deg, #3b5998 0%, #3b5998 100%)'"
              [categoryText]="ad.category"
              [productTitle]="ad.title"
              [currentPrice]="ad.currentPrice"
              [originalPrice]="ad.originalPrice"
              [productImage]="ad.image">
            </app-min-genaric-card>
          }
        </div>
        <button class="discover-more-btn">Discover more ads</button>
      </div>
    </aside>
  </div>

  <!-- Similar Ads Section -->
  <!-- <section class="similar-ads-section">
    <div class="section-header">
      <h2 class="section-title">Similar Ads</h2>
      <a routerLink="/category" class="view-more-link">View More</a>
    </div>

    <div class="slider-container">
      <button class="slider-arrow slider-arrow-left" (click)="slideLeft()" [disabled]="sliderIndex() === 0">
        <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
          <polyline points="15 18 9 12 15 6"></polyline>
        </svg>
      </button>

      <div class="slider-viewport">
        <div class="slider-track" [style.transform]="getSliderTransform()">
          @for (ad of similarAds; track ad.id) {
            <div class="slider-item">
              <app-min-genaric-card
                [badgeText]="ad.badge"
                [badgeGradient]="'linear-gradient(135deg, #3b5998 0%, #3b5998 100%)'"
                [categoryText]="ad.category"
                [productTitle]="ad.title"
                [currentPrice]="ad.currentPrice"
                [originalPrice]="ad.originalPrice"
                [productImage]="ad.image">
              </app-min-genaric-card>
            </div>
          }
        </div>
      </div>

      <button class="slider-arrow slider-arrow-right" (click)="slideRight()" [disabled]="sliderIndex() >= similarAds.length - 4">
        <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
          <polyline points="9 18 15 12 9 6"></polyline>
        </svg>
      </button>
    </div>

    <div class="slider-dots">
      @for (ad of similarAds; track $index) {
        <button
          class="slider-dot"
          [class.active]="$index === sliderIndex()"
          (click)="sliderIndex.set($index)">
        </button>
      }
    </div>
  </section> -->
</div>

<!-- Reviews Popup -->
<app-reviews-popup
  [isOpen]="showReviewsPopup()"
  [reviewsData]="reviewsData"
  (closePopup)="closeReviewsPopup()"
  (submitReview)="onSubmitReview($event)">
</app-reviews-popup>
